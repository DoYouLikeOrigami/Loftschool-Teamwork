"use strict";var team9WatermarkGeneratorModule=function(){var e=function(){i()},i=function(){$("#main-file").fileupload({dataType:"json",acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator&&navigator.userAgent),url:"server/php/",add:function(e,i){console.log("add"),i.submit()},done:function(e,i){var t=i.result.files[0];$(".wrapрer__img").length>0?$(".img-upload").remove():(console.log("создаем обертку для изображения"),$(".main__content").html("<div class='wrapper__img'></div>"),$(".wrapper__img").html("<div class='wrapper__img-resize'></div>")),console.log("создаем наше изображения(загружаем его на сервер)");var a=$("<img></img>"),t=i.result.files[0];a.attr("src",t.url),a.addClass("img-upload"),a.appendTo(".wrapper__img-resize"),a.load(function(){console.log("удаляем атрибуты width и height"),$(this).removeAttr("width").removeAttr("height").css({width:"",height:""}),console.log("начинаем получать цифры размера изображения из дополнительных классов, wrapper__image");var e=$(this).width(),i=$(this).height(),t=$(".wrapper__img").height(),r=$(".wrapper__img").width(),n=r/t,o=function(e,i,t){a.addClass(e),$(".wrapper__img-resize").css({height:i+"px",width:t+"px"})};console.log("заканчиваем получение размера изображения"),console.log("масштабируем добавочным классом"),r>e&&t>i?o("",i,e):e/i>n?o("img-upload-widthR ",Math.round(r*i/e),r):o("img-upload-heightR ",t,Math.round(t*e/i))})}}),$(document).ready(function(){t(),$("#main-file").on("change",a),$("#water-file").on("change",r)})},t=function(){$(".slider").length&&$(".slider").slider({range:!0,min:parseInt($(".slider").data("min")),max:parseInt($(".slider").data("max")),step:.01,values:[0,.5]})},a=function(e){e.preventDefault(),console.log($(this));var i=$(this),t=i.val();$("#main-text").val(t.replace(/C:\\fakepath\\/,""))},r=function(e){e.preventDefault(),console.log($(this));var i=$(this),t=i.val();$("#water-text").val(t.replace(/C:\\fakepath\\/,""))};return{init:e}}();team9WatermarkGeneratorModule.init();